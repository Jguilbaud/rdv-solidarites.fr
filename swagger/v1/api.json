{
  "openapi": "3.0.1",
  "info": {
    "title": "API RDV Solidarités V1",
    "version": "v1",
    "description": "# Paramètres généraux de l'API\n\nL'API de RDV-Solidarités vous permet de lire des données dans notre base depuis votre logiciel.\n\nToutes les fonctionnalités de RDV-Solidarités ne sont pas encore disponibles via l’API. Contactez-nous si vous avez besoin de fonctionnalités qui ne sont pas encore présentes.\n\n## Authentification\n\nCertains points de terminaison sont authentifiés. Pour savoir comment y accéder, merci de vous référer à la documentation suivante : [authentification de l'API](https://rdv-solidarites.gitbook.io/guides-pour-rdv-solidarites/tech/api-interconnexions-entrantes/authentification-and-permissions).\n\n## Verbe HTTP\n\nOn utilise les verbes HTTP conventionnels pour manipuler les ressources :\n\n- Lecture: HTTP `GET`\n- Création: HTTP `POST`\n- Mise à jour: HTTP `PUT`\n\n## Versionnage\n\nL'API est versionnée. La version actuelle est 1.0 (référencée comme v1 dans les points de terminaison).\n\n## Routes\n\nLes points de terminaison de l'API sont accessible par une route de la forme : `https://<domain>/api/<version>/<endpoint>`.\n\nAvec :\n\n- `version` est la version de l'API\n- `endpoint` est le nom du point de terminaison\n\nPar exemple, on aura : `https://<domain>/api/v1/organizations`\n\n## Pagination des réponses par listes\n\nTous les points de terminaison qui retournent des listes sont paginés.\n\nLe paramètre (optionnel) `page` permet d'accéder à une page donnée. Sauf précision contraire dans la documentation d'un point de terminaison donné, on retrouve 100 éléments par page.\n\nDe manière générale, tout point de terminaison qui retourne une liste peut retourner une liste vide.\n\n## Rate limiting\n\nL'utilisation de l'API est limitée pour les points de terminaison sans authentification. Vous pouvez effectuer au maximum 50 appels par minutes. Si vous dépassez cette limite, une erreur 429 vous sera renvoyée et vous trouverez le temps que vous devez attendre avant de relancer une requête dans le header (`Retry-After`).\n\n## Erreurs\n\nL'API est susceptible de retourner les erreurs suivantes.\n\n| Code  | Nom                   | Description                            |\n| ----  | --------              | --------                               |\n| `400` | Bad Request           | La requête est invalide                |\n| `401` | Unauthorized          | L'authentification a échoué            |\n| `403` | Forbidden             | La limite autorisée est atteinte       |\n| `404` | Not Found             | La ressource est introuvable           |\n| `422` | unprocessable_entity  | La donnée transmise est mal formattée  |\n| `429` | Too Many Requests     | Trop de requêtes ont été effectuées    |\n| `500` | Internal Server Error | Une erreur serveur produite            |\n\n## Ressources\n\n### Sérialisation\n\nLes ressources sont les éléments renvoyés par les points de terminaison. Elles sont sérialisées en JSON.\n\n### Champs DateTime\n\nLes champs de type DateTime sont formatés avec la norme ISO 8601.\n"
  },
  "components": {
    "securitySchemes": {
      "access_token": {
        "type": "apiKey",
        "name": "access-token",
        "in": "header"
      },
      "uid": {
        "type": "apiKey",
        "name": "uid",
        "in": "header"
      },
      "client": {
        "type": "apiKey",
        "name": "client",
        "in": "header"
      }
    },
    "schemas": {
      "rdvs": {
        "type": "object",
        "properties": {
          "rdvs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/rdv"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "rdvs",
          "meta"
        ]
      },
      "rdv": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string"
          },
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          },
          "cancelled_at": {
            "type": "string",
            "nullable": true
          },
          "collectif": {
            "type": "boolean"
          },
          "context": {
            "type": "string",
            "nullable": true
          },
          "created_by": {
            "type": "string",
            "enum": [
              "agent",
              "user",
              "file_attente"
            ]
          },
          "deleted_at": {
            "type": "string",
            "nullable": true
          },
          "duration_in_min": {
            "type": "integer"
          },
          "ends_at": {
            "type": "string"
          },
          "lieu": {
            "$ref": "#/components/schemas/lieu"
          },
          "max_participants_count": {
            "type": "integer",
            "nullable": true
          },
          "motif": {
            "$ref": "#/components/schemas/motif"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          },
          "rdvs_users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/rdvs_user"
            }
          },
          "starts_at": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "unknown",
              "waiting",
              "seen",
              "excused",
              "revoked",
              "noshow"
            ]
          },
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/user"
            }
          },
          "users_count": {
            "type": "integer"
          },
          "uuid": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "address",
          "agents",
          "cancelled_at",
          "collectif",
          "context",
          "created_by",
          "deleted_at",
          "duration_in_min",
          "lieu",
          "max_participants_count",
          "motif",
          "name",
          "organisation",
          "rdvs_users",
          "starts_at",
          "status",
          "users",
          "users_count",
          "uuid"
        ]
      },
      "agents": {
        "type": "object",
        "properties": {
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "agents",
          "meta"
        ]
      },
      "agent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string"
          },
          "first_name": {
            "type": "string",
            "nullable": true
          },
          "last_name": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "id",
          "email",
          "first_name",
          "last_name"
        ]
      },
      "user_with_root": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/user"
          }
        },
        "required": [
          "user"
        ]
      },
      "users": {
        "type": "object",
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/user"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "users",
          "meta"
        ]
      },
      "user": {
        "type": "object",
        "nullable": true,
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "address_details": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "bith_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "bith_name": {
            "type": "string",
            "nullable": true
          },
          "caisse_affiliation": {
            "type": "string",
            "enum": [
              "aucun",
              "caf",
              "msa"
            ],
            "nullable": true
          },
          "case_number": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "family_situation": {
            "type": "string",
            "enum": [
              "single",
              "in_a_relationship",
              "divorced"
            ],
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "invitation_accepted_at": {
            "type": "string",
            "nullable": true
          },
          "invitation_created_at": {
            "type": "string",
            "nullable": true
          },
          "last_name": {
            "type": "string"
          },
          "notify_by_email": {
            "type": "boolean"
          },
          "notify_by_sms": {
            "type": "boolean"
          },
          "number_of_children": {
            "type": "integer",
            "nullable": true
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "phone_number_formatted": {
            "type": "string",
            "nullable": true
          },
          "responsible": {
            "type": "object",
            "nullable": true
          },
          "responsible_id": {
            "type": "integer",
            "nullable": true
          },
          "user_profiles": {
            "type": "array",
            "nullable": true,
            "items": {
              "$ref": "#/components/schemas/user_profile"
            }
          }
        },
        "required": [
          "id",
          "address",
          "address_details",
          "affiliation_number",
          "birth_date",
          "birth_name",
          "case_number",
          "created_at",
          "first_name",
          "invitation_accepted_at",
          "invitation_created_at",
          "last_name",
          "notify_by_email",
          "notify_by_sms",
          "phone_number",
          "phone_number_formatted",
          "responsible",
          "responsible_id",
          "user_profiles"
        ]
      },
      "user_profile_with_root": {
        "type": "object",
        "properties": {
          "user_profile": {
            "$ref": "#/components/schemas/user_profile"
          }
        },
        "required": [
          "user_profile"
        ]
      },
      "user_profile": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/user"
          },
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          },
          "logement": {
            "type": "string",
            "enum": [
              "sdf",
              "heberge",
              "en_accession_propriete",
              "proprietaire",
              "autre",
              "locataire"
            ],
            "nullable": true
          },
          "notes": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "organisation",
          "logement",
          "notes"
        ]
      },
      "organisations": {
        "type": "object",
        "properties": {
          "organisations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/organisation"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "organisations",
          "meta"
        ]
      },
      "organisation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "phone_number"
        ]
      },
      "absence_with_root": {
        "type": "object",
        "properties": {
          "absence": {
            "$ref": "#/components/schemas/absence"
          }
        },
        "required": [
          "absence"
        ]
      },
      "absences": {
        "type": "object",
        "properties": {
          "absences": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/absence"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "absences",
          "meta"
        ]
      },
      "absence": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "ical_uid": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "first_day": {
            "type": "string",
            "format": "date"
          },
          "end_day": {
            "type": "string",
            "format": "date"
          },
          "start_time": {
            "type": "string"
          },
          "end_time": {
            "type": "string"
          },
          "agent": {
            "$ref": "#/components/schemas/agent",
            "nullable": true
          },
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          }
        },
        "required": [
          "id",
          "ical_uid",
          "title",
          "first_day",
          "end_day",
          "start_time",
          "end_time",
          "agent",
          "organisation"
        ]
      },
      "organizations": {
        "type": "object",
        "properties": {
          "organizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/organization"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "organizations",
          "meta"
        ]
      },
      "organization": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "label": {
            "type": "string"
          },
          "group_id": {
            "type": "integer"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "website": {
            "type": "string",
            "nullable": true
          },
          "public_link": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "label",
          "group_id",
          "public_link"
        ]
      },
      "invitation": {
        "type": "object",
        "properties": {
          "invitation_url": {
            "type": "string"
          },
          "invitation_token": {
            "type": "string"
          }
        },
        "required": [
          "invitation_url",
          "invitation_token"
        ]
      },
      "lieu": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "organisation_id": {
            "type": "integer"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "single_use": {
            "type": "boolean"
          }
        },
        "required": [
          "id",
          "address",
          "name",
          "organisation_id",
          "phone_number",
          "single_use"
        ]
      },
      "motifs": {
        "type": "object",
        "properties": {
          "motifs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/motif"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "motifs",
          "meta"
        ]
      },
      "motif": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "category": {
            "type": "string",
            "enum": [
              "rsa_orientation",
              "rsa_accompagnement",
              "rsa_orientation_on_phone_platform",
              "rsa_cer_signature",
              "rsa_insertion_offer",
              "rsa_follow_up"
            ]
          },
          "deleted_at": {
            "type": "string",
            "nullable": true
          },
          "location_type": {
            "type": "string",
            "enum": [
              "public_office",
              "phone",
              "home"
            ]
          },
          "name": {
            "type": "string"
          },
          "organisation_id": {
            "type": "integer"
          },
          "reservable_online": {
            "type": "boolean"
          },
          "service_id": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "category",
          "deleted_at",
          "location_type",
          "name",
          "organisation_id",
          "reservable_online",
          "service_id"
        ]
      },
      "rdvs_user": {
        "type": "object",
        "properties": {
          "send_lifecycle_notifications": {
            "type": "boolean"
          },
          "send_reminder_notification": {
            "type": "boolean"
          },
          "status": {
            "type": "string",
            "enum": [
              "unknown",
              "waiting",
              "seen",
              "excused",
              "revoked",
              "noshow"
            ]
          },
          "user": {
            "$ref": "#/components/schemas/user"
          }
        },
        "required": [
          "send_lifecycle_notifications",
          "send_reminder_notification",
          "status",
          "user"
        ]
      },
      "groups": {
        "type": "object",
        "properties": {
          "groups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/group"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "groups",
          "meta"
        ]
      },
      "group": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "label": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "label"
        ]
      },
      "meta": {
        "type": "object",
        "properties": {
          "current_page": {
            "type": "integer"
          },
          "next_page": {
            "type": "integer",
            "nullable": true
          },
          "prev_page": {
            "type": "integer",
            "nullable": true
          },
          "total_pages": {
            "type": "integer"
          },
          "total_count": {
            "type": "integer"
          }
        },
        "required": [
          "current_page",
          "next_page",
          "prev_page",
          "total_pages",
          "total_count"
        ]
      },
      "errors_generic": {
        "type": "object"
      },
      "error_too_many_request": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_authentication": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_unauthorized": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "base": {
                  "type": "string"
                }
              },
              "required": [
                "base"
              ]
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_not_found": {
        "type": "object",
        "properties": {
          "not_found": {
            "type": "string"
          }
        },
        "required": [
          "not_found"
        ]
      },
      "error_unprocessable_entity": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "errors": {
            "type": "object"
          },
          "error_messages": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "success",
          "errors",
          "error_messages"
        ]
      }
    }
  },
  "tags": [
    {
      "name": "Invitation",
      "description": "Pour manipuler des usager·ères via leur jeton d'invitation"
    },
    {
      "name": "User",
      "description": "Pour manipuler des usager·ères"
    },
    {
      "name": "Agent",
      "description": "Pour manipuler des agent·es"
    },
    {
      "name": "RDV",
      "description": "Pour manipuler des rendez-vous"
    },
    {
      "name": "Group",
      "description": "Pour manipuler des groupes (représentation des territoires)"
    },
    {
      "name": "Organisation",
      "description": "Pour manipuler des organisations"
    },
    {
      "name": "PublicLink",
      "description": "Pour manipuler des liens publics de recherche"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:3000/",
      "description": "Serveur de développement"
    },
    {
      "url": "https://demo.rdv-solidarites.fr",
      "description": "Serveur de démo"
    },
    {
      "url": "https://www.rdv-solidarites.fr",
      "description": "Serveur de production"
    }
  ],
  "paths": {
    "/api/v1/absences": {
      "get": {
        "summary": "Lister les absences",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "query",
            "description": "L'ID d'une organisation donnée",
            "example": 123,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Absence"
        ],
        "operationId": "getAbsences",
        "description": "Renvoie les absences des organisations accessibles, de manière paginée",
        "responses": {
          "200": {
            "description": "Renvoie les absences d'une organisation donnée",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "absences": [
                        {
                          "id": 4,
                          "agent": {
                            "id": 21,
                            "email": "agent_1@lapin.fr",
                            "first_name": "Évelyne",
                            "last_name": "Gérard"
                          },
                          "end_day": "2022-11-15",
                          "end_time": "15:30:00",
                          "first_day": "2022-11-15",
                          "ical": "BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:RDV Solidarités\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Paris\r\nBEGIN:DAYLIGHT\r\nDTSTART:20230326T030000\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\r\nTZNAME:CEST\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nDTSTART:20221030T020000\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\r\nTZNAME:CET\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nDTSTAMP:20221114T105831Z\r\nUID:absence_4@RDV Solidarités\r\nDTSTART;TZID=Europe/Paris:20221115T100000\r\nDTEND;TZID=Europe/Paris:20221115T153000\r\nORGANIZER:mailto:secretariat-auto@rdv-solidarites.fr\r\nSUMMARY:RDV Solidarités Indisponibilité 1\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n",
                          "ical_uid": "absence_4@RDV Solidarités",
                          "organisation": {
                            "id": 27,
                            "email": null,
                            "name": "Organisation n°1",
                            "phone_number": null
                          },
                          "rrule": null,
                          "start_time": "10:00:00",
                          "title": "Indisponibilité 1"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/absences"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Créer une absence",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organisation_id",
            "in": "query",
            "description": "ID de l'organisation",
            "example": 12,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "agent_id",
            "in": "query",
            "description": "ID de l'agent",
            "example": 23,
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "agent_email",
            "in": "query",
            "description": "Email de l'agent",
            "example": "agent@example.com",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "title",
            "in": "query",
            "description": "Titre de l'absence",
            "example": "Super absence",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "first_day",
            "in": "query",
            "description": "Premier jour de l'absence",
            "example": "2023-11-20",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "start_time",
            "in": "query",
            "description": "Heure de début de l'absence",
            "example": "08:00",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "end_day",
            "in": "query",
            "description": "Dernier jour de l'absence",
            "example": "2023-11-20",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "end_time",
            "in": "query",
            "description": "Heure de fin de l'absence",
            "example": "15:00",
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Absence"
        ],
        "operationId": "createAbsence",
        "description": "Crée une absence",
        "responses": {
          "200": {
            "description": "Crée et renvoie une absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "absence": {
                        "id": 24,
                        "agent": {
                          "id": 12,
                          "email": "agent@example.com",
                          "first_name": "Laurence",
                          "last_name": "Paris"
                        },
                        "end_day": "2023-11-20",
                        "end_time": "15:00:00",
                        "first_day": "2023-11-20",
                        "ical": "BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:RDV Solidarités\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Paris\r\nBEGIN:DAYLIGHT\r\nDTSTART:20240331T030000\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\r\nTZNAME:CEST\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nDTSTART:20231029T020000\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\r\nTZNAME:CET\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nDTSTAMP:20221114T105833Z\r\nUID:absence_24@RDV Solidarités\r\nDTSTART;TZID=Europe/Paris:20231120T080000\r\nDTEND;TZID=Europe/Paris:20231120T150000\r\nORGANIZER:mailto:secretariat-auto@rdv-solidarites.fr\r\nSUMMARY:RDV Solidarités Super absence\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n",
                        "ical_uid": "absence_24@RDV Solidarités",
                        "organisation": {
                          "id": 47,
                          "email": null,
                          "name": "Organisation n°1",
                          "phone_number": null
                        },
                        "rrule": null,
                        "start_time": "08:00:00",
                        "title": "Super absence"
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/absence_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'agent.e est introuvable",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "agent"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          },
          "422": {
            "description": "Renvoie 'unprocessable_entity' quand end_time est avant start_time ou que les formats ne sont pas corrects",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "success": false,
                      "errors": {
                        "ends_time": [
                          {
                            "error": "doit être après le début."
                          }
                        ]
                      },
                      "error_messages": [
                        "ends_time doit être après le début."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unprocessable_entity"
                }
              }
            }
          },
          "403": {
            "description": "Impossible de créer une absence pour un.e agent.e dans un service différent",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/absences/{absence_id}": {
      "get": {
        "summary": "Récupérer une absence",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "absence_id",
            "in": "path",
            "description": "L'ID d'une absence donnée",
            "example": "12",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Absence"
        ],
        "operationId": "getAbsence",
        "description": "Renvoie une absence",
        "responses": {
          "200": {
            "description": "Renvoie l'absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "absence": {
                        "id": 33,
                        "agent": {
                          "id": 36,
                          "email": "agent_1@lapin.fr",
                          "first_name": "Josselin",
                          "last_name": "Colin"
                        },
                        "end_day": "2022-11-15",
                        "end_time": "15:30:00",
                        "first_day": "2022-11-15",
                        "ical": "BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:RDV Solidarités\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Paris\r\nBEGIN:DAYLIGHT\r\nDTSTART:20230326T030000\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\r\nTZNAME:CEST\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nDTSTART:20221030T020000\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\r\nTZNAME:CET\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nDTSTAMP:20221114T105835Z\r\nUID:absence_33@RDV Solidarités\r\nDTSTART;TZID=Europe/Paris:20221115T100000\r\nDTEND;TZID=Europe/Paris:20221115T153000\r\nORGANIZER:mailto:secretariat-auto@rdv-solidarites.fr\r\nSUMMARY:RDV Solidarités Indisponibilité 1\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n",
                        "ical_uid": "absence_33@RDV Solidarités",
                        "organisation": {
                          "id": 65,
                          "email": null,
                          "name": "Organisation n°1",
                          "phone_number": null
                        },
                        "rrule": null,
                        "start_time": "10:00:00",
                        "title": "Indisponibilité 1"
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/absence_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Pas autorisé à accéder à cette absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "L'absence n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "absence"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Modifier une absence",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "absence_id",
            "in": "path",
            "description": "L'ID d'une absence donnée",
            "example": "12",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "title",
            "in": "query",
            "description": "Titre de l'absence",
            "example": "Super absence",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "first_day",
            "in": "query",
            "description": "Premier jour de l'absence",
            "example": "2023-11-20",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "start_time",
            "in": "query",
            "description": "Heure de début de l'absence",
            "example": "08:00",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "end_day",
            "in": "query",
            "description": "Dernier jour de l'absence",
            "example": "2023-11-20",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "end_time",
            "in": "query",
            "description": "Heure de fin de l'absence",
            "example": "15:00",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Absence"
        ],
        "operationId": "updateAbsence",
        "description": "Modifie une absence",
        "responses": {
          "200": {
            "description": "Modifie et renvoie l'absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "absence": {
                        "id": 45,
                        "agent": {
                          "id": 42,
                          "email": "agent_1@lapin.fr",
                          "first_name": "Sylviane",
                          "last_name": "André"
                        },
                        "end_day": "2022-11-15",
                        "end_time": "15:30:00",
                        "first_day": "2022-11-15",
                        "ical": "BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:RDV Solidarités\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Paris\r\nBEGIN:DAYLIGHT\r\nDTSTART:20230326T030000\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\r\nTZNAME:CEST\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nDTSTART:20221030T020000\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\r\nTZNAME:CET\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nDTSTAMP:20221114T105836Z\r\nUID:absence_45@RDV Solidarités\r\nDTSTART;TZID=Europe/Paris:20221115T100000\r\nDTEND;TZID=Europe/Paris:20221115T153000\r\nORGANIZER:mailto:secretariat-auto@rdv-solidarites.fr\r\nSUMMARY:RDV Solidarités Nouveau titre\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n",
                        "ical_uid": "absence_45@RDV Solidarités",
                        "organisation": {
                          "id": 77,
                          "email": null,
                          "name": "Organisation n°1",
                          "phone_number": null
                        },
                        "rrule": null,
                        "start_time": "10:00:00",
                        "title": "Nouveau titre"
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/absence_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Pas autorisé à accéder à cette absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "L'absence n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "absence"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Détruire une absence",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "absence_id",
            "in": "path",
            "description": "L'ID d'une absence donnée",
            "example": "12",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Absence"
        ],
        "operationId": "deleteAbsence",
        "description": "Détruit une absence",
        "responses": {
          "204": {
            "description": "Détruit l'absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": ""
                  }
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Pas autorisé à accéder à cette absence",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "L'absence n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "absence"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agents": {
      "get": {
        "summary": "Lister les agent·es",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "query",
            "description": "L'ID d'une organisation donnée",
            "example": "123",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Agent"
        ],
        "operationId": "getAgents",
        "description": "Renvoie les agent·es des organisations accessibles, de manière paginée",
        "responses": {
          "200": {
            "description": "Renvoie les agent·es",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "agents": [
                        {
                          "id": 54,
                          "email": "agent_1@lapin.fr",
                          "first_name": "Gui",
                          "last_name": "Dupuis"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/agents"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/groups": {
      "get": {
        "summary": "Lister les groupes (représentation des territoires)",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Group"
        ],
        "operationId": "getGroups",
        "description": "Renvoie tous les groupes, qui représentent les territoires, de manière paginée",
        "responses": {
          "200": {
            "description": "Retourne des Groups",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "groups": [
                        {
                          "id": 120,
                          "label": "Territoire n°1",
                          "name": "01"
                        },
                        {
                          "id": 121,
                          "label": "Territoire n°2",
                          "name": "02"
                        },
                        {
                          "id": 122,
                          "label": "Territoire n°3",
                          "name": "03"
                        },
                        {
                          "id": 123,
                          "label": "Territoire n°4",
                          "name": "04"
                        },
                        {
                          "id": 124,
                          "label": "Territoire n°5",
                          "name": "05"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 5
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/groups"
                }
              }
            }
          },
          "429": {
            "description": "Limite d'appels atteinte",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Limite d'appels API atteinte. Merci de patienter.\n"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_too_many_request"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations/{invitation_token}": {
      "get": {
        "summary": "Récupérer un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "invitation_token",
            "in": "path",
            "description": "Jeton d'invitation",
            "example": "abcdef123456",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Invitation",
          "User"
        ],
        "operationId": "getUserByInvitationToken",
        "description": "Renvoie un·e usager·ère grâce à son jeton d'invitation",
        "responses": {
          "200": {
            "description": "Renvoie l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 6,
                        "address": "20 avenue de Ségur, Paris",
                        "address_details": null,
                        "affiliation_number": "39012093812038",
                        "birth_date": "1985-07-20",
                        "birth_name": null,
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-11-14 11:58:39 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "divorced",
                        "first_name": "Jean",
                        "invitation_accepted_at": null,
                        "invitation_created_at": "2022-11-14 11:58:39 +0100",
                        "last_name": "JACQUES",
                        "notify_by_email": true,
                        "notify_by_sms": true,
                        "number_of_children": 12,
                        "phone_number": "07 41 71 31 15",
                        "phone_number_formatted": "+33741713115",
                        "responsible": null,
                        "responsible_id": null,
                        "user_profiles": null
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'usager·ère n'est pas trouvé·e",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "user"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/motifs": {
      "get": {
        "summary": "Lister les motifs",
        "tags": [
          "Motif"
        ],
        "operationId": "getMotifs",
        "description": "Renvoie tous les motifs à partir d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "Identifiant de l'organisation",
            "example": "1",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "active",
            "in": "query",
            "description": "filtre sur les motifs actifs",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "reservable_online",
            "in": "query",
            "description": "filtre sur les motifs réservables en ligne",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "service_id",
            "in": "query",
            "description": "filtre sur les services",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Renvoie les motifs liés à la bonne organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "motifs": [
                        {
                          "id": 20,
                          "category": "rsa_orientation",
                          "collectif": false,
                          "deleted_at": null,
                          "location_type": "public_office",
                          "name": "Motif 1",
                          "organisation_id": 118,
                          "reservable_online": true,
                          "service_id": 98
                        },
                        {
                          "id": 21,
                          "category": "rsa_orientation",
                          "collectif": false,
                          "deleted_at": null,
                          "location_type": "public_office",
                          "name": "Motif 2",
                          "organisation_id": 118,
                          "reservable_online": true,
                          "service_id": 98
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 2
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/motifs"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations": {
      "get": {
        "summary": "Lister les organisations",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "departement_number",
            "in": "query",
            "description": "Le numéro ou code de département du territoire concerné",
            "example": "26",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "city_code",
            "in": "query",
            "description": "Le code INSEE de la localité",
            "example": "26323",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Organisation"
        ],
        "operationId": "getOrganisations",
        "description": "Renvoie toutes les organisations accessibles à l'agent·e authentifié·e, de manière paginée",
        "responses": {
          "200": {
            "description": "Retourne des Organisations",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "organisations": [
                        {
                          "id": 145,
                          "email": null,
                          "name": "Organisation n°1",
                          "phone_number": null
                        },
                        {
                          "id": 146,
                          "email": null,
                          "name": "Organisation n°2",
                          "phone_number": null
                        },
                        {
                          "id": 147,
                          "email": null,
                          "name": "Organisation n°3",
                          "phone_number": null
                        },
                        {
                          "id": 148,
                          "email": null,
                          "name": "Organisation n°4",
                          "phone_number": null
                        },
                        {
                          "id": 149,
                          "email": null,
                          "name": "Organisation n°5",
                          "phone_number": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 5
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/organisations"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations": {
      "get": {
        "summary": "Lister les organisations",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "group_id",
            "in": "query",
            "description": "ID du Group sur lequel filtrer les organisations",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Organization"
        ],
        "operationId": "getOrganizations",
        "description": "Renvoie toutes les organisations, de manière paginée",
        "responses": {
          "200": {
            "description": "Retourne les Organisations sous la forme Organizations",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "organizations": [
                        {
                          "id": 165,
                          "email": null,
                          "group_id": 182,
                          "label": "Organisation n°1",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/165",
                          "website": null
                        },
                        {
                          "id": 166,
                          "email": null,
                          "group_id": 183,
                          "label": "Organisation n°2",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/166",
                          "website": null
                        },
                        {
                          "id": 167,
                          "email": null,
                          "group_id": 184,
                          "label": "Organisation n°3",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/167",
                          "website": null
                        },
                        {
                          "id": 168,
                          "email": null,
                          "group_id": 185,
                          "label": "Organisation n°4",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/168",
                          "website": null
                        },
                        {
                          "id": 169,
                          "email": null,
                          "group_id": 186,
                          "label": "Organisation n°5",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/169",
                          "website": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 5
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/organizations"
                }
              }
            }
          },
          "429": {
            "description": "Limite d'appels atteinte",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Limite d'appels API atteinte. Merci de patienter.\n"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_too_many_request"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/public_links": {
      "get": {
        "summary": "Lister les liens publics de recherche",
        "tags": [
          "PublicLink"
        ],
        "operationId": "getPublicLinks",
        "description": "Renvoie les liens publics de recherche d'un territoire donné",
        "parameters": [
          {
            "name": "territory",
            "in": "query",
            "description": "Le numéro ou code de département du territoire concerné",
            "example": "26",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Retourne les liens publics de recherche",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "public_links": [
                        {
                          "external_id": "ext_id_A",
                          "public_link": "http://www.rdv-aide-numerique-test.localhost/org/203"
                        },
                        {
                          "external_id": "ext_id_B",
                          "public_link": "http://www.rdv-aide-numerique-test.localhost/org/204"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Retourne 'bad_request' quand le territory est manquant",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "missing": "territory"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Retourne 'not_found' quand le territory ne peut pas être trouvé",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "territory"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite d'appels atteinte",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Limite d'appels API atteinte. Merci de patienter.\n"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_too_many_request"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/rdvs": {
      "get": {
        "summary": "Lister les rendez-vous d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "Identifiant de l'organisation",
            "example": "20",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "RDV"
        ],
        "operationId": "getRdvs",
        "description": "Renvoie les RDVs du service dont l'agent fait partie dans cette organisation. Si l'agent est administrateurice ou secrétaire, renvoie tous les RDVs de l'organisation en question.",
        "responses": {
          "200": {
            "description": "Appel API réussi",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "rdvs": [
                        {
                          "id": 8,
                          "address": "1 rue de l'adresse 12345 Ville",
                          "agents": [
                            {
                              "id": 115,
                              "email": "agent_1@lapin.fr",
                              "first_name": "Thérèse",
                              "last_name": "Bertin"
                            }
                          ],
                          "cancelled_at": null,
                          "collectif": false,
                          "context": null,
                          "created_by": "agent",
                          "deleted_at": null,
                          "duration_in_min": 45,
                          "ends_at": "2022-11-17 12:43:45 +0100",
                          "lieu": {
                            "id": 25,
                            "address": "1 rue de l'adresse 12345 Ville",
                            "name": "Lieu n°1",
                            "organisation_id": 213,
                            "phone_number": null,
                            "single_use": false
                          },
                          "max_participants_count": null,
                          "motif": {
                            "id": 59,
                            "category": "rsa_orientation",
                            "collectif": false,
                            "deleted_at": null,
                            "location_type": "public_office",
                            "name": "Motif 1",
                            "organisation_id": 215,
                            "reservable_online": true,
                            "service_id": 153
                          },
                          "name": null,
                          "organisation": {
                            "id": 213,
                            "email": null,
                            "name": "Organisation n°1",
                            "phone_number": null
                          },
                          "rdvs_users": [
                            {
                              "id": 8,
                              "send_lifecycle_notifications": true,
                              "send_reminder_notification": true,
                              "status": "unknown",
                              "user": {
                                "id": 10,
                                "address": "20 avenue de Ségur, Paris",
                                "address_details": null,
                                "affiliation_number": "39012093812038",
                                "birth_date": "1985-07-20",
                                "birth_name": null,
                                "caisse_affiliation": "caf",
                                "case_number": null,
                                "created_at": "2022-11-14 11:58:45 +0100",
                                "email": "usager_1@lapin.fr",
                                "family_situation": "divorced",
                                "first_name": "Gwenael",
                                "invitation_accepted_at": null,
                                "invitation_created_at": null,
                                "last_name": "ROUSSEAU",
                                "notify_by_email": true,
                                "notify_by_sms": true,
                                "number_of_children": 12,
                                "phone_number": "6 62 78 04 52",
                                "phone_number_formatted": "+33662780452",
                                "responsible": null,
                                "responsible_id": null,
                                "user_profiles": null
                              }
                            }
                          ],
                          "starts_at": "2022-11-17 11:58:45 +0100",
                          "status": "unknown",
                          "users": [
                            {
                              "id": 10,
                              "address": "20 avenue de Ségur, Paris",
                              "address_details": null,
                              "affiliation_number": "39012093812038",
                              "birth_date": "1985-07-20",
                              "birth_name": null,
                              "caisse_affiliation": "caf",
                              "case_number": null,
                              "created_at": "2022-11-14 11:58:45 +0100",
                              "email": "usager_1@lapin.fr",
                              "family_situation": "divorced",
                              "first_name": "Gwenael",
                              "invitation_accepted_at": null,
                              "invitation_created_at": null,
                              "last_name": "ROUSSEAU",
                              "notify_by_email": true,
                              "notify_by_sms": true,
                              "number_of_children": 12,
                              "phone_number": "6 62 78 04 52",
                              "phone_number_formatted": "+33662780452",
                              "responsible": null,
                              "responsible_id": null,
                              "user_profiles": null
                            }
                          ],
                          "users_count": 1,
                          "uuid": "52274895-fa1b-475e-a4c1-f6bfe9ec47d6"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/rdvs"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/user_profiles": {
      "post": {
        "summary": "Créer un profil utilisateur",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organisation_id",
            "in": "query",
            "description": "ID de l'organisation",
            "example": 12,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "description": "ID de l'utilisateur",
            "example": 12,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "logement",
            "in": "query",
            "enum": [
              "sdf",
              "heberge",
              "en_accession_propriete",
              "proprietaire",
              "autre",
              "locataire"
            ],
            "description": "Type de logement de l'utilisateur",
            "example": "proprietaire",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "notes",
            "in": "query",
            "description": "Une note sur le profil utilisateur",
            "example": "Super note",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "UserProfile"
        ],
        "operationId": "createUserProfile",
        "description": "Crée un profil utilisateur",
        "responses": {
          "200": {
            "description": "Crée et renvoie un profil utilisateur",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user_profile": {
                        "logement": "sdf",
                        "notes": "Super Note",
                        "organisation": {
                          "id": 242,
                          "email": null,
                          "name": "Organisation n°1",
                          "phone_number": null
                        },
                        "user": {
                          "id": 33,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-11-14 11:58:47 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Hortense",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "BARON",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "06 42 75 14 18",
                          "phone_number_formatted": "+33642751418",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        }
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_profile_with_root"
                }
              }
            }
          },
          "403": {
            "description": "Impossible de créer un profil utilisateur quand on a pas accès à l'organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "422": {
            "description": "Renvoie 'unprocessable_entity' quand l'utilisateur ou l'organisation n'est pas connue ou quand le logement n'est pas parmi les choix possibles ou que ce profil existe déjà",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "success": false,
                      "errors": {
                        "user": [
                          {
                            "error": "blank"
                          }
                        ]
                      },
                      "error_messages": [
                        "user doit exister"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unprocessable_entity"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "summary": "Récupérer un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUser",
        "description": "Renvoie un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 46,
                        "address": "20 avenue de Ségur, Paris",
                        "address_details": null,
                        "affiliation_number": "39012093812038",
                        "birth_date": "1985-07-20",
                        "birth_name": null,
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-11-14 11:58:49 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "divorced",
                        "first_name": "Jean",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "JACQUES",
                        "notify_by_email": true,
                        "notify_by_sms": true,
                        "number_of_children": 12,
                        "phone_number": "0628197570",
                        "phone_number_formatted": "+33628197570",
                        "responsible": null,
                        "responsible_id": null,
                        "user_profiles": [
                          {
                            "logement": null,
                            "notes": null,
                            "organisation": {
                              "id": 257,
                              "email": null,
                              "name": "Organisation n°1",
                              "phone_number": null
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Mettre à jour un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_ids[]",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "ID des organisations",
            "example": "[123]",
            "required": false
          },
          {
            "name": "first_name",
            "in": "query",
            "description": "Prénom",
            "example": "Johnny",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "last_name",
            "in": "query",
            "description": "Nom",
            "example": "Silverhand",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_name",
            "in": "query",
            "description": "Nom de naissance",
            "example": "Fripouille",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_date",
            "in": "query",
            "description": "Date de naissance",
            "example": "1976-10-01",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "Email",
            "example": "johnny@77.com",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "phone_number",
            "in": "query",
            "description": "Numéro de téléphone",
            "example": "33600008012",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "address",
            "in": "query",
            "description": "Adresse",
            "example": "10 rue du Havre, Paris",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "caisse_affiliation",
            "in": "query",
            "description": "Caisse d'affiliation",
            "example": "caf",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "affiliation_number",
            "in": "query",
            "description": "Numéro d'affiliation",
            "example": "101010",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family_situation",
            "in": "query",
            "description": "Situation familiale",
            "example": "single",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "number_of_children",
            "in": "query",
            "description": "Nombre d'enfants",
            "example": "3",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "notify_by_sms",
            "in": "query",
            "description": "Accepte les notifications par SMS",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "notify_by_email",
            "in": "query",
            "description": "Accepte les notifications par email",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "responsible_id",
            "in": "query",
            "description": "ID de l'usager·ère responsable",
            "example": 123,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "updateUser",
        "description": "Met à jour un·e usager·ère",
        "responses": {
          "200": {
            "description": "Met à jour et renvoie un·e usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 81,
                        "address": "10 rue du Havre, Paris",
                        "address_details": null,
                        "affiliation_number": "101010",
                        "birth_date": "1976-10-01",
                        "birth_name": "Fripouille",
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-11-14 11:58:52 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "single",
                        "first_name": "Alain",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "Verse",
                        "notify_by_email": false,
                        "notify_by_sms": false,
                        "number_of_children": 3,
                        "phone_number": "33600008012",
                        "phone_number_formatted": "+33600008012",
                        "responsible": {
                          "id": 80,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-11-14 11:58:52 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Adegrine",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "DUPONT",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "0774181141",
                          "phone_number_formatted": "+33774181141",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        },
                        "responsible_id": 80,
                        "user_profiles": null
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "422": {
            "description": "Des paramètres sont manquants ou mal formés ou impossibles",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "success": false,
                      "errors": {
                        "last_name": [
                          {
                            "error": "blank"
                          }
                        ],
                        "first_name": [
                          {
                            "error": "blank"
                          }
                        ]
                      },
                      "error_messages": [
                        "last_name doit être rempli(e)",
                        "first_name doit être rempli(e)"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/errors_generic"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/invite": {
      "get": {
        "summary": "Récupérer l'invitation d'un usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User",
          "Invitation"
        ],
        "operationId": "getUserInvitation",
        "description": "Renvoie l'URL d'invitation d'un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'URL d'invitation de l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "invitation_url": "http://www.example.com/users/invitation/accept?invitation_token=C0DVMLHP",
                      "invitation_token": "C0DVMLHP"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/invitation"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Récupérer l'invitation d'un usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "invite_for",
            "in": "query",
            "description": "Durée souhaitée de l'invitation (en secondes)",
            "example": 86400,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User",
          "Invitation"
        ],
        "operationId": "createUserInvitation",
        "description": "Renvoie l'URL d'invitation d'un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'URL d'invitation de l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "invitation_url": "http://www.example.com/users/invitation/accept?invitation_token=EEBNAGP9",
                      "invitation_token": "EEBNAGP9"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/invitation"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "summary": "Récupérer une liste d'usager·rès",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "ids[]",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "ID des usager·ères",
            "example": "[123]",
            "required": false
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUsers",
        "description": "Renvoie une liste paginée d'usager·ères",
        "responses": {
          "200": {
            "description": "Renvoie une liste paginée d'usager·ères",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "users": [
                        {
                          "id": 109,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-11-14 11:58:56 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Adonise",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "OLIVIER",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "07 84 69 75 40",
                          "phone_number_formatted": "+33784697540",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/users"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Créer un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organisation_ids[]",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "ID des organisations",
            "example": "[123]"
          },
          {
            "name": "first_name",
            "in": "query",
            "description": "Prénom",
            "example": "Johnny",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "last_name",
            "in": "query",
            "description": "Nom",
            "example": "Silverhand",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_name",
            "in": "query",
            "description": "Nom de naissance",
            "example": "Fripouille",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_date",
            "in": "query",
            "description": "Date de naissance",
            "example": "1976-10-01",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "Email",
            "example": "johnny@77.com",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "phone_number",
            "in": "query",
            "description": "Numéro de téléphone",
            "example": "33600008012",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "address",
            "in": "query",
            "description": "Adresse",
            "example": "10 rue du Havre, Paris",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "caisse_affiliation",
            "in": "query",
            "description": "Caisse d'affiliation",
            "example": "caf",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "affiliation_number",
            "in": "query",
            "description": "Numéro d'affiliation",
            "example": "101010",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family_situation",
            "in": "query",
            "description": "Situation familiale",
            "example": "single",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "number_of_children",
            "in": "query",
            "description": "Nombre d'enfants",
            "example": "3",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "notify_by_sms",
            "in": "query",
            "description": "Accepte les notifications par SMS",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "notify_by_email",
            "in": "query",
            "description": "Accepte les notifications par email",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "responsible_id",
            "in": "query",
            "description": "ID de l'usager·ère responsable",
            "example": 123,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "createUser",
        "description": "Crée un·e usager·ère",
        "responses": {
          "200": {
            "description": "Crée et renvoie un·e usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 150,
                        "address": "10 rue du Havre, Paris",
                        "address_details": null,
                        "affiliation_number": "101010",
                        "birth_date": "1976-10-01",
                        "birth_name": "Fripouille",
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-11-14 11:58:58 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "single",
                        "first_name": "Johnny",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "Silverhand",
                        "notify_by_email": false,
                        "notify_by_sms": false,
                        "number_of_children": 3,
                        "phone_number": "33600008012",
                        "phone_number_formatted": "+33600008012",
                        "responsible": {
                          "id": 149,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-11-14 11:58:58 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Charline",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "MOREAU",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "0665371360",
                          "phone_number_formatted": "+33665371360",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        },
                        "responsible_id": 149,
                        "user_profiles": null
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "422": {
            "description": "Des paramètres sont manquants ou mal formés ou impossibles",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "success": false,
                      "errors": [
                        "param is missing or the value is empty: organisation_ids\nDid you mean?  action\n               first_name\n               controller\n               last_name"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/errors_generic"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/users": {
      "get": {
        "summary": "Récupérer une liste d'usager·rès d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "ID de l'organisation",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUsersFromOrganisation",
        "description": "Renvoie une liste paginée d'usager·ères d'une organisation",
        "responses": {
          "200": {
            "description": "Renvoie une liste paginée d'usager·ères d'une organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "users": [
                        {
                          "id": 160,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-11-14 11:59:00 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Amaury",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "GERARD",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "06 98 94 51 08",
                          "phone_number_formatted": "+33698945108",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/users"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/users/{user_id}": {
      "get": {
        "summary": "Récupérer un·e usager·ère d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "ID de l'organisation",
            "example": 456,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUserFromOrganisation",
        "description": "Renvoie un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'usager·ère d'une organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 165,
                        "address": "20 avenue de Ségur, Paris",
                        "address_details": null,
                        "affiliation_number": "39012093812038",
                        "birth_date": "1985-07-20",
                        "birth_name": null,
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-11-14 11:59:00 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "divorced",
                        "first_name": "Jean",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "JACQUES",
                        "notify_by_email": true,
                        "notify_by_sms": true,
                        "number_of_children": 12,
                        "phone_number": "633511324",
                        "phone_number_formatted": "+33633511324",
                        "responsible": null,
                        "responsible_id": null,
                        "user_profiles": [
                          {
                            "logement": null,
                            "notes": null,
                            "organisation": {
                              "id": 355,
                              "email": null,
                              "name": "Organisation n°1",
                              "phone_number": null
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'agent ne fait pas partie de l'organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "user"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      }
    }
  }
}